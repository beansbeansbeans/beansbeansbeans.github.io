#project_index {
	li {
		.image {
			background-image: url(../images/projects_sprite.jpg);
			margin-left: auto;
			margin-right: auto;
			position: relative;
			@include trailer(5);
			@include mobile-only {
				background-image: url(../images/projects_sprite_mobile.jpg);
				@include trailer(4);
			}
		}
		&[data-project-id="dancers"] .image {
			width: 178px; 
			height: 130px;
			@include trailer(8);
			@include mobile-only {
				width: 106px;
				height: 78px;
				@include trailer(5);
			}
		}
		&[data-project-id="straws"] .image {
			background-position: 0 -914px; 
			width: 209px; 
			height: 128px;
			@include mobile-only {
				background-position: 0 -553px;
				width: 120px;
				height: 66px;
			}
		}
		&[data-project-id="notes"] .image {
			background-position: 0 -456px; 
			width: 128px; 
			height: 174px;
			@include trailer(7);
			@include mobile-only {
				background-position: 0 -273px;
				width: 77px;
				height: 104px;
			}
		}
		&[data-project-id="leaves"] .image {
			background-position: 0 -281px; 
			width: 128px; 
			height: 169px;
			@include mobile-only {
				background-position: 0 -168px;
				width: 74px;
				height: 96px;
			}
		}
		&[data-project-id="pixels"] .image {
			background-position: 0 -650px; 
			width: 158px; 
			height: 112px;
			@include mobile-only {
				background-position: 0px -390px;
				width: 95px;
				height: 53px;
			}
		}
		&[data-project-id="hiveplot"] .image {
			width: 128px; 
			height: 126px;
			background-position: 0 -139px;
			left: 14px;
			@include mobile-only {
				width: 75px;
				height: 73px;
				background-position: 0 -85px;
				left: 7px;
			}
		}
		&[data-project-id="spotlights"] .image {
			background-position: 0 -763px; 
			width: 128px; 
			height: 142px;
			@include mobile-only {
				background-position: 0 -457px;
				width: 76px;
				height: 83px;
			}
		}
	}
}

#project-lips {
	svg {
		overflow: visible;
	}
	path {
	  fill: none;
	  stroke: red;
	  stroke-linecap: round;
	  stroke-width: 10px;
	}
	.project-contents {
		position: relative;
	}
	#hidden-svg-container, #pop-svg-container {
		position: absolute;
		pointer-events: none;
	}
	#hidden-svg-container {
		opacity: 0;
	}
	.controlPoint {
		&, circle, .cloud, .word {
			@include transition(all 250ms);
		}
		circle {
			fill: white;
			stroke: red;
			stroke-width: 8px;
		}
		path {
			opacity: 0;
		}
		.spoke {
			fill: none;
			stroke-width: 1px;
			@include transform(translate3d(-8px, -8px, 0));
		}
		.glyph {
			fill: red;
			stroke: white;
			stroke-width: 50px;
		}
		.word {
			path:nth-of-type(1) {
				@include transform(rotateX(180deg) scale(0.0075) translate3d(-1200px, -300px, 0));
			}
			path:nth-of-type(2) {
				@include transform(rotateX(180deg) scale(0.0075) translate3d(-500px, -300px, 0));
			}
			path:nth-of-type(3) {
				@include transform(rotateX(180deg) scale(0.0075) translate3d(400px, -300px, 0));
			}
		}
	}
	.burst {
		.cloud, .word {
			@include transform(scale(6));
		}
		.cloud {
			circle {
				stroke-width: 1px;
				@include transform(scale(0.01));
			}
			path:nth-of-type(1) { // left, then clockwise
				@include animation(path-1-burst 750ms forwards);
			}
			path:nth-of-type(3) {
				@include animation(path-3-burst 750ms forwards);
			}
			path:nth-of-type(5) {
				@include animation(path-5-burst 750ms forwards);
			}
			path:nth-of-type(4) {
				@include animation(path-4-burst 750ms forwards);
			}
			path:nth-of-type(2) {
				@include animation(path-2-burst 750ms forwards);
			}
		}
		.word {
			path:nth-of-type(1) {
				@include animation(glyph-1-burst 750ms forwards);
			}
			path:nth-of-type(2) {
				@include animation(glyph-2-burst 750ms forwards);
			}
			path:nth-of-type(3) {
				@include animation(glyph-3-burst 750ms forwards);
			}
		}
	}
}

@include keyframe(path-1-burst) {
	35% {
		opacity: 1;
	}
	100% {
		@include transform(translate3d(-14px, -8px, 0));
		opacity: 0;
	}
}

@include keyframe(path-3-burst) {
	35% {
		opacity: 1;
	}
	100% {
		@include transform(translate3d(-11px, -11px, 0));
		opacity: 0;
	}
}

@include keyframe(path-5-burst) {
	35% {
		opacity: 1;
	}
	100% {
		@include transform(translate3d(-5px, -11px, 0));
		opacity: 0;
	}
}

@include keyframe(path-4-burst) {
	35% {
		opacity: 1;
	}
	100% {
		@include transform(translate3d(-5px, -5px, 0));
		opacity: 0;
	}
}

@include keyframe(path-2-burst) {
	35% {
		opacity: 1;
	}
	100% {
		@include transform(translate3d(-11px, -5px, 0));
		opacity: 0;
	}
}

@include keyframe(glyph-1-burst) {
	35% {
		opacity: 1;
	}
	100% {
		opacity: 0;
		@include transform(rotateX(180deg) rotateZ(20deg) scale(0.0075) translate3d(-1300px, -50px, 0));
	}
}

@include keyframe(glyph-2-burst) {
	35% {
		opacity: 1;
	}
	100% {
		opacity: 0;
		@include transform(rotateX(180deg) scale(0.0075) translate3d(-500px, -250px, 0));
	}
}

@include keyframe(glyph-3-burst) {
	35% {
		opacity: 1;
	}
	100% {
		opacity: 0;
		@include transform(rotateX(180deg) rotateZ(-20deg) scale(0.0075) translate3d(500px, -50px, 0));
	}
}

#project-dancers {
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	user-select: none;
	-webkit-tap-highlight-color:rgba(0,0,0,0);
	.project-contents {
		position: relative;
		margin-left: auto;
		margin-right: auto;
		@include leader(5);
		@include trailer(8);
		@include mobile-only {
			@include leader(2);
			@include trailer(4);
		}
		&:before {
			content: "";
			position: absolute;
			background-image: url(../images/floor.png);
			background-repeat: no-repeat;
			background-size: 100%;
			width: 100%;
			height: 7%;
			left: 0;
			top: 70%;
			z-index: -1;
			opacity: 0.9;
		}
	}
	path {
		fill: none;
		stroke: $blue;
		stroke-width: 2;
	}
	.dancer {
		opacity: 0;
		@include transition(opacity 150ms);
		&.on {
			opacity: 1;
			@include animation(dancer 4s linear forwards);
		}
		&.active {
			opacity: 0.5;
		}
	}
}

@include keyframe(dancer) {
	3%, 3.5% {
		opacity: 1
	}
	5% {
		opacity: 0.2
	}
	15%, 100% {
		opacity: 0;
	}
}

#project-pixels {
	#movie, #border {
		margin-left: auto;
		margin-right: auto;
		svg {
			overflow: visible;
		}
		rect { 
			pointer-events: all;
		} 
	}
}

#project-hiveplot {
	#changeTransition, #filters {
		display: inline-block;
		@include leader(2);
		position: relative;
		.collapser:hover {
			cursor: pointer;
			background-color: #2185C5
		}
		ul {
			position: absolute;
			top: 100%;
			left: 0;
			right: 0;
			margin-top: 3px;
			border: solid 1px #ddd;
			border-radius: 5px;
			padding-left: 0;
			li:first-of-type a {
				border-radius: 5px 5px 0 0
			}
			li:last-of-type a {
				border-radius: 0 0 5px 5px
			}
			a.active:after {
				content: "âœ“";
				display: block;
				right: 10px;
				top: 0;
				position: absolute;
			}
		}
		&.open ul {
			li {
				&:not(:last-of-type) a {
					border-bottom: solid 1px #ddd
				}
				a {
					background: white;
					width: 100%;
					display: inline-block;
					padding-left: 15px;
					padding-right: 10px;
					font-size: 16px;
					line-height: 40px;
					color: #3E454C !important;
					text-align: left !important;
					position: relative;
					&:hover {
						background-color: #FFF6E5;
					}	
				}
			}
		}
		&:not(.open) ul {
			display: none;
		}
	}

	#changeTransition {
		margin-right: rhythm(4);
	}

	#hiveplot {
		.collapser {
			font-size: 18px;
			color: #FFF6E5;
			border-radius: 5px;
			background-color: #3E454C;
			padding-left: 25px;
			padding-right: 25px;
			line-height: 45px;
			@include transition(250ms all);
			span {
				font-size: 8px; 
				vertical-align: middle;
				display: inline-block;
				margin-left: .5em;
			}
		}
		#chart {
			margin-top: 40px;
			margin-left: 200px;
		}
		text {
			font-family: Helvetica;
			font-weight: 300
		}
		.axis {
			stroke: #888;
			stroke-width: 1.5px;
		}
		.node {
			rect, text, polygon {
				display: none;
			}
			text {
				font-size: 13px;
			}
			circle {
				stroke: #000	
			}
			&.active {
				rect, text, polygon {
					display: block;
				}
				circle {
					fill: #3e454c !important
				}
				rect, polygon {
					opacity: 1 !important;
					fill: #222 !important
				}
			}
			&:hover {
				cursor: default;
			}
		}
		.link {
			fill: none;
			stroke: #999;
			stroke-width: 1.5px;
			stroke-opacity: .3;
			text {
				display: none;
			}
			path {
				@include transition(250ms all);
			}
			&.active {
				stroke: black;
				stroke-opacity: 1
			}
		}
	}
}

#project-leaves {
	canvas {
		position: relative;
		display: inline-block;
		box-shadow: 0 0 0 1px rgba(0,0,0,0.1),0 1px 2px rgba(0,0,0,0.1);
		border-radius: 3px;
		cursor: move;
		&:not(:last-of-type) {
			margin-right: 10px;
		}
		&[id="canvas_0"] {
			visibility: hidden;
			@include size(0px, 0px);
		}
		&[id="canvas_5"] {
			background: darken(rgba(#CAFCFB, .9), 6%)
		}
		&[id="canvas_4"] {
			background: darken(rgba(#9AECEA, .9), 2%)
		}
		&[id="canvas_3"] {
			background: rgba(#6ADBD9, .9)
		}
		&[id="canvas_2"] {
			background: rgba(#3ACBC6, .9)
		}
		&[id="canvas_1"] {
			background: rgba(#0ABBB5, .9)
		}
	}
}

#project-notes {
	.project-contents {
		position: relative;
		text-align: center;
		margin-left: auto;
		margin-right: auto;
		@include perspective(1000px);
		@include leader(20);
		@include trailer(20);
		@include mobile-only {
			@include leader(14);
			@include trailer(12);
		}
	}	
	.keyboard,
	.canvas {
		@include transform(translateZ(200px));
	}
	.keyboard {
		z-index: 1;
		opacity: 1;
		position: relative;
		@include transition(all 300ms);
		cursor: default;
		overflow: visible;
		&.dim .key rect {
			opacity: 0.1;
		}
		&:hover .key rect, &.remixing .key rect {
			opacity: 0.2;
		}
		&.fade rect {
			opacity: 0 !important;
		}
		&.bright rect {
			opacity: 1 !important;
		}
		.key {
			rect {
				@include transition(all 200ms);
				@include transform-origin(center);
				&.active {
					opacity: 0.9;
					@include transform(scale(1, 1.3));
				}
				&.half-active {
					opacity: 0.4;
					@include transform(scale(1, 1.075));
				}
			}
		}
	}

	.refreshing-notes & {
		.keyboard, .player {
			pointer-events: none;
		}
	}

	svg {
		position: absolute;
		left: 0;
		top: 0;
		.note {
			display: inline-block;
		}
	}

	.icons {
		@include trailer($lines: 12, $font-size: map-get(map-get($text-map, large), font-size));
		@include mobile-only {
			@include transform(scale(0.75));
			@include trailer($lines: 8, $font-size: map-get(map-get($text-map, large), font-size));
		}
	}

	.icon {
		@include transition(all 250ms);
		display: inline-block;
		cursor: pointer;
		overflow: hidden;
		text-transform: uppercase;
		width: rhythm($lines: 10, $font-size: map-get(map-get($text-map, large), font-size));
		height: rhythm($lines: 10, $font-size: map-get(map-get($text-map, large), font-size));
		margin: 0 15px;
		@include border-radius(5px);
		text-align: center;
		@include adjust-font-size-to(map-get(map-get($text-map, large), font-size), $lines: 9.75);
		&.player svg {
			margin-top: -8px;
			margin-left: -7px;
		}
		&.refresh svg {
			margin-top: 1px;
			margin-left: 1px;
		}
		&.help svg {
			margin-top: 2px;
			margin-left: 2px;
		}
		&:hover {
			opacity: 0.6;
		}

	}

	.canvas {
		position: absolute;
		left: 0;
		top: 0;
		z-index: 1;
		text-align: center;
		.text {
			position: relative;
			text-transform: uppercase;
			@extend .large-text;
			font-weight: 700;
			z-index: 1;
			opacity: 0;
			@include animation(fadeIn .25s .5s forwards);
		}
		.particle {
			position: absolute;
			border: solid 2px $white;
			@include border-radius(50%);
			background: $blue;
			@include animation(swipe 1.5s forwards);
		}
	}
}

// 2 scales: particle size, and resolution
// counter!

@include keyframe(fadeIn) {
	100% {
		opacity: 1;
	}
}

@include keyframe(swipe) {
	0% {
		opacity: 0.9;
	}
	100% {
		opacity: 0;
	}
}








